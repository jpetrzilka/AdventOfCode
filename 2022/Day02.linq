<Query Kind="Program" />

void Main()
{	
	Solution1();
	Solution2();
}

void Solution1()
{
	input
		.Split(Environment.NewLine)
		.Select(x => x
			.Split(' ')
			.Select(y => y[0] switch
			{
				'A' => RPS.Rock,
				'B' => RPS.Paper,
				'C' => RPS.Scissors,
				'X' => RPS.Rock,
				'Y' => RPS.Paper,
				'Z' => RPS.Scissors,
				_ => throw new NotSupportedException()
			})
			.Reverse()
			.ToArray())
		.Select(x => x switch
		{
			[RPS.Rock, RPS.Rock] => 1 + 3,
			[RPS.Rock, RPS.Paper] => 1 + 0,
			[RPS.Rock, RPS.Scissors] => 1 + 6,
			[RPS.Paper, RPS.Rock] => 2 + 6,
			[RPS.Paper, RPS.Paper] => 2 + 3,
			[RPS.Paper, RPS.Scissors] => 2 + 0,
			[RPS.Scissors, RPS.Rock] => 3 + 0,
			[RPS.Scissors, RPS.Paper] => 3 + 6,
			[RPS.Scissors, RPS.Scissors] => 3 + 3,
			_ => throw new NotSupportedException()
		})
		.Sum()
		.Dump();
}

void Solution2()
{	
	input
		.Split(Environment.NewLine)
		.Select(x =>
			(
				move: x[0] switch
				{
					'A' => RPS.Rock,
					'B' => RPS.Paper,
					'C' => RPS.Scissors,
					_ => throw new NotSupportedException()
				},
				expectedResult: x[2] switch
				{				
					'X' => GameResult.Lost,
					'Y' => GameResult.Draw,
					'Z' => GameResult.Won,
					_ => throw new NotSupportedException()
				}
			))
		.Select(x => x switch
		{
			(RPS.Rock, GameResult.Lost) => (int)RPS.Scissors + (int)x.expectedResult,
			(RPS.Rock, GameResult.Draw) => (int)RPS.Rock + (int)x.expectedResult,
			(RPS.Rock, GameResult.Won ) => (int)RPS.Paper + (int)x.expectedResult,
			(RPS.Paper, GameResult.Lost) => (int)RPS.Rock + (int)x.expectedResult,
			(RPS.Paper, GameResult.Draw) => (int)RPS.Paper + (int)x.expectedResult,
			(RPS.Paper, GameResult.Won ) => (int)RPS.Scissors + (int)x.expectedResult,
			(RPS.Scissors, GameResult.Lost) => (int)RPS.Paper + (int)x.expectedResult,
			(RPS.Scissors, GameResult.Draw) => (int)RPS.Scissors + (int)x.expectedResult,
			(RPS.Scissors, GameResult.Won ) => (int)RPS.Rock + (int)x.expectedResult,
			_ => throw new NotSupportedException()
		})
		.Sum()
		.Dump();
}

enum RPS
{
	Rock = 1,
	Paper = 2,
	Scissors = 3
}

enum GameResult
{
	Lost = 0,
	Draw = 3,
	Won = 6
}

string input = """
A X
A Z
A Z
A X
A X
B X
C Y
B X
A Z
A X
A X
A X
A X
B X
A X
B X
A Z
A Z
A X
A X
A Z
A Z
A Z
A X
A Z
A X
C Y
C Z
A X
B X
A X
A X
A X
A Z
B X
A X
B X
C Y
A X
A Z
A Y
A X
A Z
A X
A Z
B X
A X
A Z
B X
A X
A Z
A X
A Z
A Z
A X
B X
B X
B X
B Z
A Z
B Z
A X
A X
A Z
A X
B Z
B Y
A Z
B X
A Y
B X
C X
B Z
B X
C Y
A Z
A X
A X
C Y
B X
A X
A Y
A X
A X
A Y
A Z
C Z
A Z
B X
B X
A X
B X
A X
A X
B Y
B X
A Z
B X
B X
A X
B Z
C Z
A Z
C Z
B X
B X
A Z
A X
A X
B X
A Z
B X
A Z
A X
A X
A X
B X
B X
B X
B X
A X
A Y
A X
B X
A Z
A X
A X
A X
C Y
A X
B X
A X
A Z
A X
B X
A Y
B X
C Z
A Y
A X
B Y
A X
B X
A X
A X
A X
B X
A X
A X
A Z
A Z
A X
C Y
B X
B X
A Z
B X
B Y
C Y
A X
A X
B Y
A X
B Y
B X
B X
A X
A Z
B X
B X
A Y
A X
C Y
C Y
C Y
A X
B X
A X
A X
A X
B X
B X
C Y
A X
A Z
A Z
A X
B X
A Z
A Z
A X
B X
A X
A Z
A X
C Z
B X
A X
C Y
C Y
A Z
B X
B Z
C Y
B X
A Y
B Y
A Z
A X
A X
B X
B Y
A Z
A X
B X
A X
C X
C Y
A X
B X
A Z
A X
B X
A X
C Y
C Y
C Y
A X
A X
A Z
A X
C Y
A Z
B Y
A X
C Y
B Z
B X
B X
A Z
B X
A Y
C X
A X
B X
A Z
C Y
A X
A Z
C Z
A X
C Y
B X
C Y
C Z
A Y
A Z
C Y
A X
A X
A X
A Y
B X
B X
C Y
C Y
A X
A Z
C Y
B Z
B X
C Z
B X
B X
C Z
A X
A X
B X
B X
A X
A X
B X
B X
B X
C Y
A X
A X
A X
A X
B X
A X
A X
B X
B Z
A X
B X
A X
C Y
B Y
A X
B X
A Y
B Z
B X
A X
B Z
B X
A Y
A X
B X
A X
A Z
B X
A X
A X
C Z
A X
B X
A X
B Y
A Z
A X
B X
A X
A Z
B X
B X
B Y
B X
A X
C Y
A X
A X
B X
B Y
A X
A X
A X
C Z
C Z
B Y
B X
B Z
A X
A Y
A X
C Y
B X
A X
A X
A X
A Z
C Y
A X
A X
C Y
A X
A X
A X
A Z
A Y
A X
A Y
C Z
A Z
A X
B X
A Z
C Z
C Y
A Z
A Z
C Y
C Z
C Z
A X
B X
B X
B Z
C Y
A X
A X
A X
A Z
A X
B X
B X
C X
A X
A X
B X
A Y
A X
A X
B Y
C Z
A X
A X
A Y
B X
B X
B X
C Z
A Z
A Y
B Y
A X
B X
B X
B X
B Z
A Y
B Y
A Z
A Z
C Z
B X
A X
A Y
A Y
C Y
B Y
A X
A X
A X
A X
B Y
A X
A Y
A X
A Z
B X
B X
A Y
A X
A Y
A Y
A Z
B X
B X
A Z
B X
A X
A Z
A Z
B X
A Z
A X
A Y
A Z
A X
A Z
B Y
A X
C Y
B X
C X
C Y
B Z
C Y
C Y
A X
A X
A Y
B X
C Z
B X
C Y
A X
A Z
C Y
A X
A Z
A Z
B Y
A X
A X
B X
B Y
A X
A X
B X
A X
B X
A X
B X
A X
B Y
A Z
B X
B X
B X
B X
A Y
A X
A Y
A Y
C Z
B Z
A X
B Y
A X
C Z
B X
A X
A X
A X
A X
A X
C Z
C Z
C Z
A X
C Y
A X
C X
C Z
A X
B X
A Z
A Z
A Z
A X
A Z
A Z
B Z
A X
B X
A Z
C Y
A X
A Z
A Z
A Z
B Z
B X
A X
B X
B X
B X
B X
B Y
B X
A X
A X
A Z
A Z
A Z
B Y
A X
A X
A Y
B X
B X
A Z
A X
B X
A X
A X
A Z
C Y
A X
B X
A X
B X
A X
B X
A Z
B X
A X
A Z
A Z
B X
A Y
A X
A Z
C Y
A X
A X
A X
B Y
B X
A Y
A Z
C X
B X
C Y
A X
B X
C Z
C Z
A X
B X
B X
B Y
B X
B X
A X
A Z
B Z
B X
A X
B X
B X
B X
A Z
A X
A X
A Z
B Y
B Z
A X
A Z
A Z
A Z
A X
A X
A X
A X
A X
A X
B X
A Z
B Z
A X
A Z
C Y
A Z
A X
A Y
A Y
B X
B Y
A Z
A X
B X
B Y
A X
B X
A X
B X
B X
C Y
A Z
B X
A X
B X
A X
A Z
A X
A Z
A X
A X
A X
B X
A Y
A X
A X
B X
C Z
B X
A X
C Y
A X
B X
A Z
B Y
B Z
A X
A X
A X
C Y
A X
A X
A X
B X
C Z
A Z
A X
C Z
B X
A Z
A Y
C Y
C Y
A Z
B X
C Z
C Z
A X
A X
A X
A X
A X
B X
C Y
A Z
A X
B X
A Z
A X
A Y
A X
B Z
A X
B X
A X
A X
A X
A Y
B X
C Y
A X
A Z
C Y
A Z
A X
A Y
A X
A Z
A X
A Y
C Y
A Y
A Z
A X
A X
A X
A Z
A X
B X
A Y
A X
B X
A X
A X
B X
A X
B X
C Z
B X
A Z
A Z
C Y
B Y
B X
A Y
B X
B X
A Y
A X
C X
C Y
B X
A X
C X
C Z
A X
A Z
B X
B Z
C Y
A X
C Y
A Y
B X
B Y
A X
C Y
A Z
A X
A X
C Y
C Y
A X
A Z
B X
A Y
B X
A Z
A Z
A Z
A Z
A X
C Z
B X
B Y
A X
A Y
A X
B X
C Y
C Z
B Z
B X
B Z
A X
A Z
C Y
A X
B Y
A X
A Z
A X
C Z
A X
A Y
B Y
A X
A X
A X
A Z
B X
B X
B X
A X
C Y
C X
C Y
C Z
A X
A X
A Z
A Z
A X
A X
A X
A X
A X
A X
A X
C Z
A X
B X
A Z
B X
B X
B X
A Y
A X
A X
B X
A X
B X
A Z
C Y
B Y
C Z
B Y
B X
B X
A X
C Z
A X
B Y
C Y
B Y
A Z
A Y
A X
A X
C Y
B X
B X
A Z
A X
C Y
C Y
A Y
A Z
B X
C Z
A Z
C Y
A X
A X
A Z
B X
A X
A X
A Z
B X
C Z
A X
A X
B X
B Y
A Z
A X
B X
A X
C Y
B X
B X
B Z
C Y
A X
B X
A X
A X
A Y
A Y
A Z
B X
A Z
B Y
B X
A X
B Y
A X
A X
A Z
A X
B X
A Z
A X
A Z
B X
B X
B X
B Z
C Y
A Y
A Y
A Z
A X
B X
B X
A X
A X
B Y
A X
B X
A Z
B Z
B X
C Y
A Z
A X
C Z
A Y
A Y
B X
A Y
C Z
A Z
A X
B X
A Z
C Y
C X
B X
B Z
A X
A Y
A X
B X
A X
A X
C Y
B Z
B Z
B Y
C Z
C Y
B X
B Y
C Y
A Z
B X
A X
A X
A X
A X
A X
A X
B X
B X
B X
A X
C Y
A X
A Y
A Z
B Y
C Y
A Z
A X
A X
A Z
A Y
B X
A Y
A X
A X
C Z
A X
A X
B X
A X
A Z
A Z
A X
A X
A X
B X
A X
A X
A X
A Z
A X
B X
B Z
C Y
A X
A Z
B X
B X
B X
A X
B X
A X
B X
A Y
B Y
C Y
A X
C Z
B Z
A Z
A X
A X
A Z
A Y
A Z
A X
A X
B X
A X
A X
A Z
C Z
B X
B Y
A Z
B X
A Z
A X
A X
A X
C Y
C Y
A Z
A X
A X
B Y
A Y
A X
B Z
B X
B Z
B X
B Y
B X
A Y
A Z
C Y
B X
A X
A X
B X
B Z
A X
C X
A X
A X
A X
A X
A X
A X
B X
A X
C Z
A Y
B X
B X
B Z
A X
B X
B Z
B X
A Z
A X
B X
A X
A Y
B X
A Z
C Z
B X
C Z
A X
A X
C Y
A Z
C Y
A Z
A X
B X
A X
C Y
A Z
A X
A X
B X
B X
A Z
B Y
B X
A X
A Z
A X
B X
A X
A Z
A Z
A Y
A Y
A X
C Z
A Z
A Z
A X
B X
A Y
B Z
A X
A Z
A X
C Z
B X
A Z
C Z
A X
C X
A Z
A X
A X
B Z
A X
B X
A X
B X
C Z
A X
B X
A Z
B X
C Y
B X
A Z
A X
A Y
C Z
A Z
B X
A Z
A Y
A Z
B X
A X
B X
C Y
B X
A X
C Y
A X
A X
B Y
A X
B Y
A X
A X
A X
B X
A X
A X
C Z
A X
B X
A Y
A Y
B Z
A Z
A Y
A X
B X
B Y
A Z
B Y
A X
A Z
A X
A Z
B X
A X
A X
B X
A Y
B X
B X
A X
A Z
B X
A Y
B X
A Z
B X
B X
B X
B X
A Y
A Z
B X
B Y
B X
C Y
C Y
C Y
B X
B X
A Y
A X
B X
B X
A X
B X
A X
A Z
A Z
A Z
B X
A X
A X
A Y
A X
A X
C Y
B X
C Y
A X
A Y
C Z
A X
B X
A Z
A X
A X
A Z
A X
B Z
A X
A Z
A X
C Y
A Y
C X
A X
C Y
B X
B X
A Z
A X
A X
A X
B X
A X
C Y
C Y
A Y
A X
C Z
A X
B X
B Y
A Z
A X
B X
B X
A X
A Z
C Y
B X
A Y
A X
A Z
B X
A X
A Z
B X
A Y
B Z
A Z
C Z
C Y
A Z
A X
A X
A Z
B X
A X
B X
A X
A X
B X
A Z
A X
C Z
B X
A Z
B Y
A Z
A X
A Z
B X
A X
A X
A Y
B X
C Z
B X
A X
A X
A Z
B X
C X
B X
B X
A Z
B Y
B X
A Z
C Y
A X
A X
B X
B X
A X
B X
A Z
A X
A X
A Z
A X
A X
B X
B X
A X
A Z
A Y
A X
A X
C Y
B X
A X
B X
C Z
A Z
B X
A X
A X
A X
C Y
A X
A X
A X
A Z
B Y
B X
A X
A X
A Z
B X
C Z
B X
A Z
A Z
A X
A Y
B Y
B X
A Z
A Z
A X
A Y
B X
A X
A Z
B X
A Y
A Z
A Z
B X
C Z
A X
A X
B X
B X
A X
A Y
A Y
C Z
B X
A X
A Z
C Y
B X
A Z
A X
B X
B Y
A X
B X
A Y
B X
A X
A Z
B X
B X
C Y
B X
B X
B Y
A X
A X
B X
B X
A X
B X
C Y
A X
A X
A Z
A Z
B X
A Y
B X
B Y
A X
A Z
A X
A Z
A X
B Y
B X
B X
A X
B X
A X
B X
B X
A X
B X
C X
A Z
A Z
A X
A X
A Z
A X
B X
A X
A X
A Z
A Z
A X
A X
B X
C Y
A Z
A X
A X
A Y
A X
B Z
C Z
A Z
B X
A X
B X
A X
B X
B X
A Y
B Y
A X
B X
B Y
C Y
B Z
B Y
B Y
A Z
A X
A Y
A X
A Z
A Z
A X
A X
A X
A X
A Y
C Y
A X
A Y
A Z
A Z
B X
A X
A X
A Z
B Y
B X
B X
A X
B Z
B Z
A Y
B X
A Y
A X
B X
C Z
A X
A Y
B X
A X
B Z
C Y
A Z
A X
A Z
A X
A X
A X
A X
C Y
B X
A X
A X
C Y
C Y
A Z
C Y
A Z
A Y
C X
B X
C Y
A Z
A X
B X
B Z
B X
B X
B X
B X
B X
A X
A Z
B X
A Y
A X
A Y
B X
A X
A X
A X
B Z
B Z
B X
B X
A Y
A X
B Y
B X
B Y
C Y
A X
A X
C Y
A X
B X
B X
B X
C Z
B X
A Z
B X
B X
A X
B Z
A Z
A Z
A X
A Z
A Y
A Z
B X
A X
B X
A X
A X
A X
B X
A X
B X
A X
A X
B X
A Z
A X
A Z
C Y
A X
B X
A X
A X
B X
B X
C Z
A X
A X
B X
A X
A Y
A X
A X
A Z
A X
A X
B X
A X
A X
A X
A Y
C Z
A Z
A Z
A X
B X
A Z
A X
A X
A X
C Y
C Y
A Z
C Y
B X
A X
B X
B X
A Z
A Z
A Y
B X
A Z
A X
A Z
A X
A X
A X
A Z
A Z
B X
A X
A X
B X
B X
A Z
B X
A X
A X
B X
B X
B X
A X
A X
A Z
A X
A X
B Y
B Y
C Y
A Y
A Y
B X
B X
C Y
A X
B X
A X
A X
A Z
A Y
A X
B X
A X
B X
A X
A Z
A X
C Y
B X
B X
A X
B X
A X
A X
A Z
C Y
B X
B X
A X
A X
A Z
A Z
B Y
A X
B X
A Y
C Z
B X
A X
A Z
B Y
A Z
B X
B X
B X
A X
A Z
A Z
B Y
A Y
B X
B Y
A Y
A Z
A X
A X
B X
B X
A Y
B X
A X
A X
C Y
B X
A X
C X
C Z
A X
A X
C Y
C Z
A Z
A X
C Y
C Y
C Y
A X
A Y
A Z
A X
C Z
A X
C X
B X
B Y
B Z
A X
A X
A X
A Z
B X
B X
C X
A X
C Z
C Y
A X
A X
B X
B X
A X
A X
A X
A Z
A Z
B X
A Z
B Y
A Y
A Y
A Z
B X
A Y
A X
A X
B X
A Z
B X
A Y
A X
B X
A X
B X
A X
B X
B Z
A Z
A Y
A Z
A X
B X
B X
C Y
B X
A X
B X
A Y
B X
B X
C Y
B X
A Z
A Z
C Y
A X
B X
B X
A X
B X
A Z
A X
A X
A Z
A Z
C Z
A X
A X
A X
A X
A X
A X
A Z
C Y
A X
C Y
A X
B X
C Y
B X
A Y
B X
B X
B X
A X
A X
A X
C Y
A Z
A Z
B X
A X
A Z
B X
B X
A X
A X
B Z
A X
B Z
B X
A X
A X
A X
B X
A X
C Y
A Y
A X
A X
B X
A Y
A X
C Y
C Y
B X
B X
A X
A X
C Y
B Y
C Y
A X
B X
A Y
B Z
B X
B X
A Y
B X
A Z
C Y
B X
B X
B Y
A X
A X
A X
C Y
B X
A Y
B X
A Z
B Y
A X
A X
A X
A X
A X
A X
B X
C Z
B X
B X
A X
A X
C Y
A X
A X
A X
A X
B Z
B X
A Z
B Z
C Z
C Y
B X
B X
C Z
A Z
A Y
A Z
A Y
C Z
A X
A X
A Z
A X
A Z
A X
B Z
B X
B X
C Z
B X
C Y
C Y
B X
A X
A X
A X
B Y
A X
C Y
B Y
C Y
B Y
A Z
B X
A X
A Z
B X
B Z
A Z
A X
A X
A Y
A X
A X
A Z
B X
B X
B X
B X
B X
A X
A X
A X
A Z
A Z
A Y
A X
A Z
A Z
B X
A X
B X
B X
A Z
B Y
A X
A X
A X
A X
B X
A Y
A X
C X
A Z
A X
C Z
C Y
B X
A Z
A Z
B X
C Y
A X
A Z
A X
B Y
C Y
A X
A X
A Z
A X
C Y
A Z
A X
A X
A X
C Y
B X
A X
B Y
A Z
A X
A Z
B X
A Z
A Z
A X
A X
C Z
B X
A Z
A X
B Z
A Z
A Z
B X
A X
A Z
A Y
A X
A Z
A Z
C X
C Z
B X
B X
A Z
A X
B X
A X
A X
A X
A Z
B X
A Z
A X
B X
A X
A X
C Z
B X
C Y
A X
B X
A Z
A Z
A X
B Z
B X
A Z
A Z
A X
C Y
A X
B X
C Y
B X
B X
A Z
B X
A Z
C Y
B X
A Y
B X
A Z
B Z
A Z
B X
A X
B Z
A X
A Y
B Z
C Y
C Y
B X
A X
A X
A X
A X
B Z
A X
A X
A X
C Y
C X
B Y
B X
B X
B X
A Y
A X
A Z
A X
B X
A Z
C Y
A X
A Z
A Z
A X
A X
A X
A X
A Z
A X
A X
B X
C Z
B X
C Z
B Y
B X
A Z
A Z
A Z
B Y
A Y
A Z
B X
C Y
A X
B X
A Z
C Y
A Y
B X
A X
A Y
A X
A Z
B X
A Z
B Y
B X
A X
B X
A X
A X
A X
A Y
B X
A Y
A X
B X
A X
A X
C Y
A X
A X
B Z
A Z
A Z
A X
C Y
B X
B X
C Y
A Z
C Y
A X
A X
B X
B X
A X
A Z
B Y
B X
A Z
B X
A X
B X
A Z
C Y
A X
B X
A X
A X
A Z
A X
B X
C Z
A X
A X
A Y
B X
A Z
B X
B X
B Y
A X
A Z
A X
A Z
B X
B X
A X
A X
B Z
A X
C Y
B X
A X
A Z
A Z
B X
C Y
C Y
B Y
A Z
C Z
A X
B X
A X
A X
B Y
B X
A X
A X
A Y
A Z
B X
A X
A X
A Z
A X
A X
B X
B X
A Y
A X
B X
A Z
B Z
B X
A Z
A X
A Z
B X
C Y
A X
A X
B X
A Z
B X
A Z
C Z
A Z
A X
C Y
A X
B X
B Z
A X
B X
C X
A X
B Y
A X
A X
C Y
A X
B Y
A X
A X
A X
B X
A X
B X
A Z
C Y
A X
C Z
A X
B X
A Z
A X
C Z
C Z
A X
A Y
A Z
A X
B X
B X
A Z
B X
A X
B X
B Y
B X
B X
C Z
A Y
A X
A Z
B Z
A X
A Z
A Z
A Y
B X
A Y
A X
A X
B X
A Z
B Z
A X
A Z
A Z
A Z
C Y
A X
B Z
B X
A Z
B X
A Z
A Y
A X
C Z
C X
A Y
A X
A Z
A X
A X
A Z
A Y
A Z
A Y
A X
C Y
B X
A Z
A X
A X
C Y
A X
A X
B Z
A Z
C Y
A X
A X
A X
B X
C Y
A X
A Y
B X
A X
A X
B Y
A Z
A X
A X
B X
A Z
A Y
C Y
C Z
C Y
A X
C Y
C Y
A X
A Y
C Y
B X
A X
B X
A X
A X
B X
A X
A Z
C Y
C Y
B X
A X
B X
C Z
C Y
B X
A X
A X
A Y
A X
A Y
A Z
B X
A Z
A Z
A X
A X
B X
C Y
B X
A Z
A X
A X
A X
B X
B Z
B X
B X
B X
A Z
A X
B Z
A X
B Z
A X
B Y
C Z
B Y
C Z
B Y
B X
A X
A X
C Y
B X
B X
A X
B Z
A Z
A Z
A X
A X
A X
B X
B X
B X
C Y
A X
B X
B X
B Z
B X
A Z
C Y
A X
C Z
A Z
""";